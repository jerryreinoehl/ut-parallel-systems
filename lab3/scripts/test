#!/bin/bash
# =============================================================================
# Run go tests with colorized output.
# =============================================================================

go test -v ./... | sed -r \
  -e 's/PASS.*/\x1b[1;32m\0\x1b[0m/' \
  -e 's/FAIL.*/\x1b[1;31m\0\x1b[0m/' \
  -e 's/RUN.*/\x1b[36m\0\x1b[0m/' \
  -e 's/([a-zA-Z_]+_test.go):([[:digit:]]+)/\x1b[34m\1\x1b[0m:\x1b[35m\2\x1b[0m/g' \
  -e 's/^ok.*/\x1b[32m\0\x1b[0m/'
